<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Aynaz</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,300;1,300;1,400&family=Cormorant+Garamond:ital,wght@0,200;0,300;1,200;1,300&family=Cinzel:wght@300&display=swap" rel="stylesheet">
<style>
:root{
  --gold:#c9a96e;--gold-l:#edddb4;--rose:#c8506a;--rose-d:#7a1530;
  --ivory:#f2ebe0;--dark:#04020a;
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
html,body{width:100%;height:100%;background:var(--dark);overflow:hidden;-webkit-font-smoothing:antialiased;touch-action:none;}

/* CURSOR */
#cur{width:5px;height:5px;background:var(--gold);border-radius:50%;position:fixed;pointer-events:none;z-index:9999;transform:translate(-50%,-50%);box-shadow:0 0 10px var(--gold),0 0 20px rgba(201,169,110,0.3);mix-blend-mode:screen;}
#cur-o{width:26px;height:26px;border:1px solid rgba(201,169,110,0.28);border-radius:50%;position:fixed;pointer-events:none;z-index:9998;transform:translate(-50%,-50%);transition:width 0.3s,height 0.3s,border-color 0.3s;}

/* CANVAS LAYERS */
#space-canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;}
#nebula-canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1;opacity:0.55;}
#float-canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:3;pointer-events:none;}

/* GRAIN */
#grain{position:fixed;top:-50%;left:-50%;width:200%;height:200%;z-index:2;pointer-events:none;opacity:0.032;
background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
animation:gr 0.45s steps(1) infinite;}
@keyframes gr{0%{transform:translate(0,0)}25%{transform:translate(-2%,2%)}50%{transform:translate(1%,-1%)}75%{transform:translate(-1%,2%)}100%{transform:translate(0,0)}}

/* VIGNETTE */
#vig{position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(ellipse at center,transparent 8%,rgba(4,2,10,0.93) 100%);z-index:4;pointer-events:none;}

/* SCREENS */
#stage{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10;}
.sc{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:clamp(28px,7vw,70px) clamp(22px,6vw,80px);text-align:center;opacity:0;pointer-events:none;transition:opacity 2.4s cubic-bezier(0.4,0,0.2,1);}
.sc.on{opacity:1;pointer-events:all;}

/* TYPOGRAPHY */
.eyebrow{font-family:'Cinzel',serif;font-weight:300;font-size:clamp(0.38rem,1vw,0.52rem);letter-spacing:0.72em;color:rgba(201,169,110,0.35);text-transform:uppercase;margin-bottom:clamp(16px,3.2vw,30px);}

.display{
  font-family:'Playfair Display',serif;font-weight:300;font-style:italic;
  font-size:clamp(4.2rem,18vw,11rem);letter-spacing:0.09em;line-height:0.9;
  color:transparent;
  background:linear-gradient(145deg,var(--gold-l) 0%,var(--gold) 30%,var(--rose) 62%,var(--gold-l) 100%);
  background-size:300% 300%;-webkit-background-clip:text;background-clip:text;
  animation:shimmer 7s ease-in-out infinite;
  filter:drop-shadow(0 0 55px rgba(201,169,110,0.08));
}
@keyframes shimmer{0%,100%{background-position:0% 50%}50%{background-position:100% 50%}}

.body-text{font-family:'Cormorant Garamond',serif;font-weight:300;font-style:italic;font-size:clamp(1rem,2.7vw,1.5rem);letter-spacing:0.05em;line-height:2.1;color:rgba(242,235,224,0.75);max-width:min(560px,88vw);}
.body-text em{font-style:normal;color:var(--gold-l);font-weight:400;}

.serif-label{font-family:'Cormorant Garamond',serif;font-weight:200;font-style:italic;font-size:clamp(0.68rem,1.5vw,0.85rem);letter-spacing:0.3em;color:rgba(242,235,224,0.2);margin-top:clamp(12px,2.2vw,22px);}

.div-h{width:clamp(38px,6vw,65px);height:1px;background:linear-gradient(90deg,transparent,var(--gold),transparent);margin:clamp(16px,3vw,28px) auto;}
.div-v{width:1px;height:clamp(26px,4vw,42px);background:linear-gradient(to bottom,transparent,var(--gold),transparent);margin:clamp(16px,3vw,28px) auto;}

/* S0 */
#s0 .eyebrow{animation:fuA 2s ease 0.4s both;}
#s0 .display{animation:fuA 2.5s ease 0.8s both;}
#s0 .serif-label{animation:fuA 2s ease 1.3s both;}
#s0 .touch{position:absolute;bottom:40px;font-family:'Cinzel',serif;font-size:clamp(0.36rem,0.85vw,0.46rem);letter-spacing:0.62em;color:rgba(201,169,110,0.2);text-transform:uppercase;animation:pulse 3.8s ease-in-out infinite;}
@keyframes fuA{from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}
@keyframes pulse{0%,100%{opacity:0.1}50%{opacity:0.45}}

/* S1 */
#s1 .quote-wrap{position:relative;}
#s1 .quote-wrap::before{content:'\201C';font-family:'Playfair Display',serif;font-size:clamp(7rem,20vw,14rem);color:rgba(201,169,110,0.04);position:absolute;top:-25px;left:-15px;line-height:1;pointer-events:none;}

/* S2 — words */
#s2{gap:0;}
.wrow{display:block;font-family:'Cormorant Garamond',serif;font-style:italic;font-weight:300;font-size:clamp(0.92rem,2.4vw,1.3rem);letter-spacing:0.17em;color:rgba(242,235,224,0.08);line-height:2.6;transition:color 1.5s ease,text-shadow 1.5s ease;}
.wrow.lit{color:rgba(242,235,224,0.8);}
.wrow.glit{color:var(--gold-l);text-shadow:0 0 38px rgba(201,169,110,0.2);}

/* S3 */
.big-em{font-family:'Playfair Display',serif;font-style:italic;font-weight:300;font-size:clamp(1.5rem,5.2vw,3rem);letter-spacing:0.08em;line-height:1.65;color:rgba(242,235,224,0.87);max-width:min(600px,90vw);}
.big-em span{display:block;color:transparent;background:linear-gradient(90deg,var(--gold),var(--rose),var(--gold));background-size:200%;-webkit-background-clip:text;background-clip:text;font-style:normal;animation:shimmer 5s ease-in-out infinite;}

/* S4 */
.heart-wrap{display:flex;flex-direction:column;align-items:center;}
.hsv{width:clamp(60px,14vw,95px);height:clamp(60px,14vw,95px);animation:hb 2.3s ease-in-out infinite;filter:drop-shadow(0 0 22px rgba(200,80,106,0.55));margin-bottom:clamp(16px,3vw,28px);}
@keyframes hb{0%,100%{transform:scale(1)}15%{transform:scale(1.22)}30%{transform:scale(1)}45%{transform:scale(1.12)}60%{transform:scale(1)}}

/* S5 FINAL */
.fn{font-family:'Playfair Display',serif;font-style:italic;font-weight:300;font-size:clamp(4.5rem,19vw,12rem);letter-spacing:0.08em;line-height:0.88;color:transparent;background:linear-gradient(135deg,var(--gold-l),var(--gold),var(--rose),var(--gold));background-size:300%;-webkit-background-clip:text;background-clip:text;animation:shimmer 5s ease-in-out infinite;filter:drop-shadow(0 0 80px rgba(201,169,110,0.1));}
.fn-sub{font-family:'Cormorant Garamond',serif;font-style:italic;font-weight:200;font-size:clamp(0.62rem,1.5vw,0.82rem);letter-spacing:0.45em;color:rgba(242,235,224,0.16);margin-top:clamp(9px,1.8vw,16px);text-transform:uppercase;}

/* RIPPLE */
.rp{position:fixed;width:2px;height:2px;border-radius:50%;border:1px solid rgba(201,169,110,0.45);pointer-events:none;z-index:8;transform:translate(-50%,-50%);animation:rpo 0.95s ease-out forwards;}
@keyframes rpo{to{width:140px;height:140px;opacity:0;border-color:rgba(201,169,110,0)}}

/* PROGRESS */
#prog{position:fixed;bottom:26px;left:50%;transform:translateX(-50%);display:flex;gap:6px;align-items:center;z-index:20;pointer-events:none;transition:opacity 1.5s;}
.pd{width:3px;height:3px;border-radius:50%;background:rgba(201,169,110,0.14);transition:all 0.6s ease;}
.pd.a{background:var(--gold);box-shadow:0 0 7px var(--gold);transform:scale(1.8);}
</style>
</head>
<body>

<div id="cur"></div>
<div id="cur-o"></div>

<!-- CANVAS LAYERS -->
<canvas id="space-canvas"></canvas>
<canvas id="nebula-canvas"></canvas>
<canvas id="float-canvas"></canvas>
<div id="grain"></div>
<div id="vig"></div>

<div id="stage">

  <!-- S0: AÇILIŞ -->
  <div class="sc on" id="s0">
    <div class="eyebrow">sana özel &nbsp;·&nbsp; sadece senin için yazıldı</div>
    <div class="display">Aynaz</div>
    <div class="serif-label">bu sayfa, uzun süredir yazılmak istendi</div>
    <div class="touch">devam etmek için dokun</div>
  </div>

  <!-- S1: İLK SÖZCÜKLER -->
  <div class="sc" id="s1">
    <div class="quote-wrap">
      <div class="div-h"></div>
      <p class="body-text">
        Seni tanımak,<br>
        bir şiiri <em>yavaş yavaş</em> anlamak gibi.<br><br>
        Her satırında yeni bir şey keşfediyorsun,<br>
        her seferinde <em>daha derin</em> etkileniyorsun.
      </p>
      <div class="div-h"></div>
    </div>
  </div>

  <!-- S2: KELİMELER CANLANIR -->
  <div class="sc" id="s2">
    <span class="wrow" id="w0">sen güldüğünde</span>
    <span class="wrow" id="w1">sanki bir şey düzelir içimde</span>
    <span class="wrow" id="w2">konuştuğunda</span>
    <span class="wrow" id="w3">her kelimeni dinlemek istiyorum</span>
    <span class="wrow" id="w4">ve sustukta bile</span>
    <span class="wrow" id="w5">sesin kulaklarımda kalıyor</span>
  </div>

  <!-- S3: ÖZLEM -->
  <div class="sc" id="s3">
    <div class="eyebrow">öyle bir his var ki</div>
    <div class="div-v"></div>
    <p class="big-em">
      Bazı insanlar vardır —<br>
      hayatına girdiklerinde<br>
      <span>her şeyi değiştirir.</span><br>
      Sen tam olarak öylesin.
    </p>
    <div class="div-v"></div>
  </div>

  <!-- S4: KALPTEN -->
  <div class="sc" id="s4">
    <div class="heart-wrap">
      <svg class="hsv" viewBox="0 0 100 90" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <radialGradient id="hg" cx="45%" cy="35%" r="65%">
            <stop offset="0%" stop-color="#f07090"/>
            <stop offset="50%" stop-color="#c8506a"/>
            <stop offset="100%" stop-color="#7a1530"/>
          </radialGradient>
          <filter id="hbl"><feGaussianBlur stdDeviation="2.5" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
        </defs>
        <path d="M50 82 C50 82 8 52 8 28 C8 15 18 6 30 6 C39 6 46 11 50 18 C54 11 61 6 70 6 C82 6 92 15 92 28 C92 52 50 82 50 82Z" fill="url(#hg)" filter="url(#hbl)"/>
        <ellipse cx="33" cy="22" rx="7" ry="4" fill="rgba(255,255,255,0.17)" transform="rotate(-25 33 22)"/>
      </svg>
      <p class="body-text" style="font-size:clamp(0.9rem,2.2vw,1.25rem);">
        Seni değerli kılan şey<br>
        ne yaptığın değil —<br><br>
        <em>sadece sen olman.</em><br>
        Bu his, tarif etmesi zor.<br>
        Ama gerçek.
      </p>
      <div class="serif-label">— içtenlikle</div>
    </div>
  </div>

  <!-- S5: FINAL -->
  <div class="sc" id="s5">
    <div class="eyebrow">ve tüm bunlardan sonra</div>
    <div class="fn">Aynaz</div>
    <div class="fn-sub">bu his, sözcüklerin çok ötesinde</div>
  </div>

</div>

<div id="prog">
  <div class="pd a" id="p0"></div>
  <div class="pd" id="p1"></div>
  <div class="pd" id="p2"></div>
  <div class="pd" id="p3"></div>
  <div class="pd" id="p4"></div>
  <div class="pd" id="p5"></div>
</div>

<script>
/* ═══════════════════════════════
   CURSOR
═══════════════════════════════ */
const cur=document.getElementById('cur'),curO=document.getElementById('cur-o');
let mx=window.innerWidth/2,my=window.innerHeight/2,ox=mx,oy=my;
document.addEventListener('mousemove',e=>{mx=e.clientX;my=e.clientY;cur.style.left=mx+'px';cur.style.top=my+'px';});
(function ac(){ox+=(mx-ox)*0.1;oy+=(my-oy)*0.1;curO.style.left=ox+'px';curO.style.top=oy+'px';requestAnimationFrame(ac);})();

/* ═══════════════════════════════
   SPACE STARFIELD
═══════════════════════════════ */
const spC=document.getElementById('space-canvas');
const spX=spC.getContext('2d');
let stars=[];

function resizeSp(){spC.width=window.innerWidth;spC.height=window.innerHeight;}

function initStars(){
  stars=[];
  // Background static stars
  for(let i=0;i<320;i++){
    stars.push({
      x:Math.random()*spC.width,
      y:Math.random()*spC.height,
      r:Math.random()*0.9+0.15,
      baseA:Math.random()*0.65+0.15,
      ph:Math.random()*Math.PI*2,
      spd:Math.random()*0.004+0.001,
      twinkle:Math.random()>0.4
    });
  }
  // Shooting stars
  shooters=[];
}

let shooters=[];
let shootTimer=0;

function addShooter(){
  shooters.push({
    x:Math.random()*spC.width*1.2-spC.width*0.1,
    y:Math.random()*spC.height*0.5,
    vx:Math.random()*4+3,
    vy:Math.random()*2+1,
    len:Math.random()*80+60,
    a:1,
    life:1
  });
}

function drawSpace(t){
  spX.clearRect(0,0,spC.width,spC.height);

  // Deep space gradient
  const bg=spX.createRadialGradient(spC.width*0.5,spC.height*0.35,0,spC.width*0.5,spC.height*0.5,spC.width*1.1);
  bg.addColorStop(0,'#0d0520');
  bg.addColorStop(0.35,'#080215');
  bg.addColorStop(0.7,'#05010e');
  bg.addColorStop(1,'#020009');
  spX.fillStyle=bg;
  spX.fillRect(0,0,spC.width,spC.height);

  // Stars
  stars.forEach(s=>{
    s.ph+=s.spd;
    const a=s.twinkle?s.baseA*(0.4+0.6*Math.sin(s.ph)):s.baseA;
    // Color variation
    const hue=Math.random()>0.85?'rgba(201,180,230,'+a+')':Math.random()>0.7?'rgba(180,210,255,'+a+')':'rgba(255,252,240,'+a+')';
    spX.beginPath();
    spX.arc(s.x,s.y,s.r,0,Math.PI*2);
    spX.fillStyle=hue;
    spX.fill();

    // Cross sparkle for bright stars
    if(s.r>0.75&&a>0.5){
      spX.strokeStyle=`rgba(255,252,240,${a*0.25})`;
      spX.lineWidth=0.4;
      spX.beginPath();spX.moveTo(s.x-s.r*3,s.y);spX.lineTo(s.x+s.r*3,s.y);spX.stroke();
      spX.beginPath();spX.moveTo(s.x,s.y-s.r*3);spX.lineTo(s.x,s.y+s.r*3);spX.stroke();
    }
  });

  // Shooting stars
  shootTimer++;
  if(shootTimer>180+Math.random()*200){shootTimer=0;addShooter();}
  shooters=shooters.filter(s=>s.life>0);
  shooters.forEach(s=>{
    s.x+=s.vx;s.y+=s.vy;s.life-=0.018;
    const grd=spX.createLinearGradient(s.x,s.y,s.x-s.vx*(s.len/5),s.y-s.vy*(s.len/5));
    grd.addColorStop(0,`rgba(255,252,240,${s.life*0.9})`);
    grd.addColorStop(0.4,`rgba(201,169,110,${s.life*0.4})`);
    grd.addColorStop(1,'rgba(0,0,0,0)');
    spX.beginPath();
    spX.moveTo(s.x,s.y);
    spX.lineTo(s.x-s.vx*(s.len/5),s.y-s.vy*(s.len/5));
    spX.strokeStyle=grd;
    spX.lineWidth=1.2;
    spX.stroke();
  });

  requestAnimationFrame(drawSpace);
}

/* ═══════════════════════════════
   NEBULA LAYER
═══════════════════════════════ */
const nbC=document.getElementById('nebula-canvas');
const nbX=nbC.getContext('2d');

function resizeNb(){nbC.width=window.innerWidth;nbC.height=window.innerHeight;}

function drawNebula(){
  nbX.clearRect(0,0,nbC.width,nbC.height);
  // Large soft nebula clouds
  const clouds=[
    {x:0.2,y:0.25,rx:0.45,ry:0.3,c:'rgba(80,20,120,0.18)'},
    {x:0.75,y:0.6,rx:0.5,ry:0.35,c:'rgba(120,30,60,0.14)'},
    {x:0.5,y:0.5,rx:0.6,ry:0.5,c:'rgba(20,10,60,0.12)'},
    {x:0.85,y:0.2,rx:0.3,ry:0.25,c:'rgba(60,20,100,0.1)'},
    {x:0.1,y:0.75,rx:0.35,ry:0.3,c:'rgba(100,30,50,0.1)'},
  ];
  clouds.forEach(cl=>{
    const grd=nbX.createRadialGradient(
      cl.x*nbC.width,cl.y*nbC.height,0,
      cl.x*nbC.width,cl.y*nbC.height,
      Math.max(cl.rx*nbC.width,cl.ry*nbC.height)
    );
    grd.addColorStop(0,cl.c);
    grd.addColorStop(1,'rgba(0,0,0,0)');
    nbX.fillStyle=grd;
    nbX.beginPath();
    nbX.ellipse(cl.x*nbC.width,cl.y*nbC.height,cl.rx*nbC.width,cl.ry*nbC.height,0,0,Math.PI*2);
    nbX.fill();
  });
}

/* ═══════════════════════════════
   FLOATING HEARTS & FLOWERS
═══════════════════════════════ */
const flC=document.getElementById('float-canvas');
const flX=flC.getContext('2d');
let floaters=[];
let flTime=0;
let spawnRate=90; // frames between spawns

function resizeFl(){flC.width=window.innerWidth;flC.height=window.innerHeight;}

// Draw a heart shape on canvas
function drawHeart(ctx,x,y,size,color,alpha,rotation){
  ctx.save();
  ctx.translate(x,y);
  ctx.rotate(rotation);
  ctx.globalAlpha=alpha;
  ctx.beginPath();
  const s=size*0.5;
  ctx.moveTo(0,-s*0.5);
  ctx.bezierCurveTo(s*0.5,-s*1.2,s*1.3,-s*0.3,0,s*0.8);
  ctx.bezierCurveTo(-s*1.3,-s*0.3,-s*0.5,-s*1.2,0,-s*0.5);
  ctx.fillStyle=color;
  ctx.fill();
  // Inner shine
  ctx.globalAlpha=alpha*0.25;
  ctx.beginPath();
  ctx.ellipse(-s*0.18,-s*0.15,s*0.22,s*0.12,-0.7,0,Math.PI*2);
  ctx.fillStyle='rgba(255,255,255,1)';
  ctx.fill();
  ctx.restore();
}

// Draw a simple flower
function drawFlower(ctx,x,y,size,color,alpha,rotation,petals){
  ctx.save();
  ctx.translate(x,y);
  ctx.rotate(rotation);
  ctx.globalAlpha=alpha;
  const n=petals||6;
  for(let i=0;i<n;i++){
    ctx.save();
    ctx.rotate((Math.PI*2/n)*i);
    ctx.beginPath();
    ctx.ellipse(0,-size*0.5,size*0.28,size*0.5,0,0,Math.PI*2);
    ctx.fillStyle=color;
    ctx.fill();
    ctx.restore();
  }
  // Center
  ctx.beginPath();
  ctx.arc(0,0,size*0.28,0,Math.PI*2);
  ctx.fillStyle='rgba(255,220,120,1)';
  ctx.fill();
  ctx.restore();
}

// Draw a sparkle / star
function drawSparkle(ctx,x,y,size,color,alpha,rotation){
  ctx.save();
  ctx.translate(x,y);
  ctx.rotate(rotation);
  ctx.globalAlpha=alpha;
  ctx.strokeStyle=color;
  ctx.lineWidth=size*0.12;
  ctx.lineCap='round';
  for(let i=0;i<4;i++){
    ctx.save();
    ctx.rotate((Math.PI/4)*i);
    const l=size*(i%2===0?1:0.55);
    ctx.beginPath();ctx.moveTo(0,-l);ctx.lineTo(0,l);ctx.stroke();
    ctx.restore();
  }
  ctx.restore();
}

const HEART_COLORS=[
  'rgba(200,80,106,1)','rgba(232,60,90,1)','rgba(255,100,130,1)',
  'rgba(201,169,110,1)','rgba(237,221,180,1)','rgba(180,60,100,1)'
];
const FLOWER_COLORS=[
  'rgba(255,120,150,1)','rgba(230,100,140,1)','rgba(200,80,120,1)',
  'rgba(255,160,120,1)','rgba(255,200,150,1)','rgba(201,169,110,1)'
];
const TYPES=['heart','heart','heart','flower','flower','sparkle'];

function spawnFloater(){
  const type=TYPES[Math.floor(Math.random()*TYPES.length)];
  const fromLeft=Math.random()>0.5;
  const startX=fromLeft?-60:flC.width+60;
  const startY=Math.random()*flC.height;
  const size=Math.random()*22+10;
  const speed=Math.random()*0.35+0.12;
  const angle=fromLeft?(Math.random()*0.4-0.2+0.1):(-Math.random()*0.4+0.2-0.1);
  const vx=(fromLeft?1:-1)*(speed+Math.random()*0.2);
  const vy=(Math.random()-0.5)*0.25;
  const rotSpd=(Math.random()-0.5)*0.012;
  const color=type==='heart'?HEART_COLORS[Math.floor(Math.random()*HEART_COLORS.length)]:FLOWER_COLORS[Math.floor(Math.random()*FLOWER_COLORS.length)];
  floaters.push({
    type,x:startX,y:startY,size,vx,vy,
    rot:Math.random()*Math.PI*2,rotSpd,
    color,alpha:0,maxAlpha:Math.random()*0.45+0.25,
    phase:'in',life:0,maxLife:Math.random()*500+400,
    petals:Math.floor(Math.random()*3)+5,
    wobble:Math.random()*Math.PI*2,
    wobbleSpd:Math.random()*0.02+0.008,
    wobbleAmp:Math.random()*0.8+0.3
  });
}

// Also spawn from bottom drifting up on final stage
function spawnRisingFloater(){
  const type=Math.random()>0.4?'heart':'flower';
  floaters.push({
    type,
    x:Math.random()*flC.width,
    y:flC.height+50,
    size:Math.random()*18+9,
    vx:(Math.random()-0.5)*0.4,
    vy:-(Math.random()*0.6+0.3),
    rot:Math.random()*Math.PI*2,
    rotSpd:(Math.random()-0.5)*0.015,
    color:type==='heart'?HEART_COLORS[Math.floor(Math.random()*HEART_COLORS.length)]:FLOWER_COLORS[Math.floor(Math.random()*FLOWER_COLORS.length)],
    alpha:0,maxAlpha:Math.random()*0.55+0.3,
    phase:'in',life:0,maxLife:Math.random()*600+500,
    petals:Math.floor(Math.random()*3)+5,
    wobble:Math.random()*Math.PI*2,
    wobbleSpd:Math.random()*0.018+0.006,
    wobbleAmp:Math.random()*1.2+0.4,
    rising:true
  });
}

let finalMode=false;
let finalRiseTimer=0;

function drawFloaters(){
  flX.clearRect(0,0,flC.width,flC.height);
  flTime++;

  // Spawn
  if(flTime%spawnRate===0) spawnFloater();
  if(finalMode){
    finalRiseTimer++;
    if(finalRiseTimer%28===0) spawnRisingFloater();
  }

  floaters=floaters.filter(f=>f.life<f.maxLife);
  floaters.forEach(f=>{
    f.life++;
    f.wobble+=f.wobbleSpd;
    f.rot+=f.rotSpd;

    // Wobble
    const wx=Math.sin(f.wobble)*f.wobbleAmp;
    f.x+=f.vx+wx*0.03;
    f.y+=f.vy;

    // Alpha fade
    const prog=f.life/f.maxLife;
    if(prog<0.12) f.alpha=Math.min(f.maxAlpha,f.alpha+f.maxAlpha/50);
    else if(prog>0.78) f.alpha=Math.max(0,f.maxAlpha*(1-prog)/0.22);
    else f.alpha=f.maxAlpha;

    // Glow
    flX.save();
    flX.shadowColor=f.type==='heart'?'rgba(200,80,106,0.6)':'rgba(255,160,100,0.4)';
    flX.shadowBlur=f.size*1.4;

    if(f.type==='heart') drawHeart(flX,f.x,f.y,f.size,f.color,f.alpha,f.rot);
    else if(f.type==='flower') drawFlower(flX,f.x,f.y,f.size*0.7,f.color,f.alpha,f.rot,f.petals);
    else drawSparkle(flX,f.x,f.y,f.size,f.color,f.alpha,f.rot);

    flX.restore();
  });

  requestAnimationFrame(drawFloaters);
}

/* ═══════════════════════════════
   WORD REVEAL
═══════════════════════════════ */
const wrows=document.querySelectorAll('.wrow');
const wCls=[['lit'],['glit'],['lit'],['glit'],['lit'],['glit']];
function revealWords(){
  wrows.forEach(w=>w.classList.remove('lit','glit'));
  wrows.forEach((w,i)=>setTimeout(()=>w.classList.add(...wCls[i]),i*265+200));
}

/* ═══════════════════════════════
   RIPPLE
═══════════════════════════════ */
function makeRipple(x,y){
  const r=document.createElement('div');
  r.className='rp';r.style.left=x+'px';r.style.top=y+'px';
  document.body.appendChild(r);
  setTimeout(()=>r.remove(),1000);
}

/* ═══════════════════════════════
   STAGE
═══════════════════════════════ */
const screens=[...document.querySelectorAll('.sc')];
const pdots=[...document.querySelectorAll('.pd')];
let stage=0,busy=false;

function goTo(n,rx=window.innerWidth/2,ry=window.innerHeight/2){
  if(busy||n===stage||n>=screens.length)return;
  busy=true;
  makeRipple(rx,ry);
  screens[stage].classList.remove('on');
  pdots[stage].classList.remove('a');
  stage=n;

  // Adjust floater density per stage
  if(stage===1)spawnRate=70;
  if(stage===2)spawnRate=55;
  if(stage===3)spawnRate=40;
  if(stage===4)spawnRate=30;
  if(stage===5){spawnRate=22;finalMode=true;setTimeout(()=>document.getElementById('prog').style.opacity='0',1200);}

  setTimeout(()=>{
    screens[stage].classList.add('on');
    pdots[stage].classList.add('a');
    if(stage===2)setTimeout(revealWords,380);
    setTimeout(()=>busy=false,2500);
  },80);
}

function next(ex=window.innerWidth/2,ey=window.innerHeight/2){if(stage<screens.length-1)goTo(stage+1,ex,ey);}

window.addEventListener('mousedown',e=>{if(e.button===0)next(e.clientX,e.clientY);});
window.addEventListener('touchstart',e=>{e.preventDefault();const t=e.touches[0];next(t.clientX,t.clientY);},{passive:false});
window.addEventListener('keydown',e=>{if(e.key===' '||e.key==='ArrowRight')next();});

/* ═══════════════════════════════
   RESIZE & INIT
═══════════════════════════════ */
function resizeAll(){resizeSp();resizeNb();resizeFl();}
window.addEventListener('resize',()=>{resizeAll();drawNebula();});
resizeAll();
drawNebula();
drawSpace();
drawFloaters();
</script>
</body>
</html>
